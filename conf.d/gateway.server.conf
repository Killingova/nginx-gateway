# =========================================================
# gateway.server.conf (server-level)
# Verantwortung:
# - Public HTTP/HTTPS Listener
# - Shared Security/CORS/Tenant-Policy via include
# - Routing include: /etc/nginx/api_conf.d/*.conf
# =========================================================

server {
  listen 80;
  server_name _;

  return 301 https://$host$request_uri;
}

server {
  listen 443 ssl;
  http2 on;
  server_name _;

  ssl_certificate     /etc/nginx/certs/fullchain.pem;
  ssl_certificate_key /etc/nginx/certs/privkey.pem;

  add_header Strict-Transport-Security "max-age=63072000; includeSubDomains; preload" always;

  include /etc/nginx/conf.d/gateway.shared.inc;
}
